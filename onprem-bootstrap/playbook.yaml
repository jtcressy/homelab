---
#playbook.yaml

- name: Check all nodes
  hosts: raspberrypi,unifiudm
  gather_facts: false
  tasks:
    - name: DISPLAY HOST VAR
      debug:
        msg: "The mgmt IP is {{ ansible_host }}"
    - name: Save known hosts
      delegate_to: localhost
      raw: "ssh-keyscan -H {{ inventory_hostname }} >> ~/.ssh/known_hosts"
      ignore_errors: yes
    - name: Check connection
      raw: uname -a
      register: command_output
      changed_when: false
    - debug:
        var: command_output.stdout_lines


- name: SETUP UDM PRO
  import_playbook: playbooks/udmp.yml
  
- name: SETUP RASPBERRY PI NODES
  import_playbook: playbooks/raspberrypi.yml
